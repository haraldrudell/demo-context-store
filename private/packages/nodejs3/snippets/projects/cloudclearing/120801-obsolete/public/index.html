<html>
<head>
  <title>Fb Friends Game</title>
  <meta name="viewport" content="initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<link rel='stylesheet' href='/stylesheets/style.css' />
  <script src="js/jquery-1.5.1.min.js"></script>
  <script src="js/getInfo.js"></script>
  <script src="javascripts/picker.js"></script>
</head>

<body>
	<h1>Fb Friends Game</h1>
  <div id="user-info">Hello!<br/>
    <a href="#" onclick="login();">Login</a><br/>
  </div>

  <a href="#" onclick="publishStory();">Publish feed story</a><br/>
  <a href="#" onclick="sendRequest();">Send request</a><br>
  <a href="#" onclick="getInfo();">getInfo</a><br>
  
  <fb:like width="250"></fb:like>
  <div id="fb-root"></div>
  
  <script>


    (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    }());


window.fbAsyncInit = function() {
    FB.init({ appId: '179548482130062', 
              status: true, 
              cookie: true,
              xfbml: true,
              oauth: true});

    FB.Event.subscribe('auth.statusChange', handleStatusChange);  
};


  
function login() {
    FB.login(function(response) { }, {scope:'user_likes,user_interests, friends_about_me,friends_activities,friends_birthday, friends_checkins, friends_education_history, friends_events, friends_games_activity, friends_groups, friends_hometown friends_interests, friends_likes, friends_location, friends_notes, friends_online_presence, friends_photo_video_tags, friends_photos, friends_questions, friends_relationship_details, friends_relationships, friends_religion_politics, friends_status, friends_subscriptions, friends_videos, friends_website, friends_work_history', });
}



  

function publishStory() {
    FB.ui({
        method: 'feed',
        name: 'I\'m building a social mobile web app!',
        caption: 'This web app is going to be awesome.',
        description: 'Check out Facebook\'s developer site to start building.',
        link: 'http://www.mattwkelly.com/icebreaker',
        picture: 'http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png'
    }, 
          function(response) {
              console.log('publishStory response: ', response);
          });
    return false;
}

function sendRequest() {
    FB.ui({
        method: 'apprequests',
        message: 'Check out this awesome app!'
    }, 
          function(response) {
              console.log('sendRequest response: ', response);
          });
}

function handleStatusChange(response) {
    if (response.authResponse) {
        //console.log(response);
        updateUserInfo(response);
        //getCommonLikes(response);
    }
}

function updateUserInfo(response) {
    FB.api('/me&fields=likes,id,name', function(response) {
        document.getElementById('user-info').innerHTML = '<img src="https://graph.facebook.com/' + 
            response.id + '/picture">' + 
            response.name;
    });
}
  
</script>
<div id="picker">Should not be visible</div>
<button onclick="getFriends();">My Friends</button>
<div id="myDiv">Should not be visible</div>
</body>
</html>

