#!/bin/bash -eu
# Â© 2017-present Harald Rudell <harald.rudell@gmail.com> (http://www.haraldrudell.com)
# This source code is licensed under the ISC-style license found in the LICENSE file in the root directory of this source tree.
export BABEL_ENV=rollup # Node.js 4.8.1 with import
../../node_modules/.bin/babel --out-dir config configrollup

for DIR in configrollup configes; do
  for INFILE in "$DIR"/*.mjs; do
    OUTFILE="config/$(basename "${INFILE:0:-4}.js")"
    ../../node_modules/.bin/babel --out-file "$OUTFILE" "$INFILE"
  done
  export BABEL_ENV=development # Node.js 6 CommonJS
done
