(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(23)},19:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(7),o=n.n(c),u=(n(19),n(3)),i=n.n(u),l=n(4),s=n(1),f=n(5),m=n(8),d=n(9),b=n(11),p=n(10),h=n(12),v=n(2),O=n(13),j={},g=function(){return y.forEach(function(e){return E(e,!0)})};function E(e,t){if("function"===typeof Object(e).next)return!t||e.next(j);if("function"===typeof e)return!t||e(j);throw new Error("plainStore: bad argument to subscribe")}var y=[];var w=Object(r.createContext)(),x=w.Provider,k=(w.Consumer,{store:j,getState:function(){return j},subscribe:function(e){return E(e)&&y.push(e)&&{unsubscribe:function(){return function(e){var t=y.indexOf(e);t>=0&&y.splice(t,1)}(e)}}},notify:g}),S=Object(r.memo)(function(e){var t=e.children,n=e.store;return Object(r.useMemo)(function(){return Object.assign(j,Object(O.a)({},n))},[n])&&a.a.createElement(x,{value:k},t)});var C,P,A=function(){return++j.value},I=function(e,t){var n=t.id;return{record:e.records.get(n)}},M=function(e){return e&&e.toJS()||{}};C=1,!isNaN(C=+C)&&(j.value=C),P=[{id:1,record:"One"},{id:2,record:"Two"}],j.records=Object(f.b)(P.map(function(e){return[e.id,Object(f.a)(e)]}));var N=function(e,t,n){return e(3-t)},B=function(){return function(){return T.apply(this,arguments)}().catch(console.error)};function T(){return(T=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:A(),g();case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var D,J,R=function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return setTimeout(e,1e3)}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),W=(D=function(e){return{value:e.value}},function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;n||(n={});var c=String(n.displayName||t.displayName||t.name||"Connect"),o=!1!==n.pure;if("function"!==typeof e)throw new Error("connect: mapStateToProps not function");var u=function(n){function r(){var t,n;Object(m.a)(this,r);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(b.a)(this,(t=Object(p.a)(r)).call.apply(t,[this].concat(c)))).getSelectors=function(t){return Object(e(t,n.props))},n.componentDidMount=function(){return(n.subscription=n.context.subscribe(Object(v.a)(Object(v.a)(n))))+(n.lastProps=n.getSelectors(n.context.getState()))},n.componentWillUnmount=function(){return n.subscription.unsubscribe()},n}return Object(h.a)(r,n),Object(d.a)(r,[{key:"next",value:function(e){if(o){var t=this.lastProps,n=this.getSelectors(e),r=Object.entries(n);if(Object.keys(t).length===r.length&&r.every(function(e){var n=Object(s.a)(e,2),r=n[0],a=n[1];return a===t[r]}))return;this.lastProps=n}this.setState({a:this.a?++this.a:this.a=1})}},{key:"render",value:function(){var n=this.props,r=this.context;return a.a.createElement(t,Object.assign({},n,Object(e(r.getState(),n))))}}]),r}(o?r.PureComponent:r.Component);return u.contextType=w,c&&(u.displayName=c),u}(D,e,J)})(function(e){var t=e.value;return a.a.createElement("div",null,"value: ",String(t))});function H(e){var t=e.id,n=function(e,t,n){n=!1!==n;var a=Object(r.useContext)(w);if(!a)throw new Error("useAllstore: store context missing, did Store component render?");var c=a.subscribe,o=a.store,u=function(){return e(o,t)},i=Object(r.useMemo)(function(){return u()},n?[Object.values(t)]:void 0),l=Object(r.useState)(0),f=Object(s.a)(l,2),m=f[0],d=f[1];function b(e){var t=u();if(n){var r=Object.entries(t);if(Object.keys(i).length===r.length&&r.every(function(e){var t=Object(s.a)(e,2),n=t[0];return t[1]===i[n]}))return}return d(m+1)}return Object(r.useEffect)(function(){return c(b).unsubscribe},[a]),i}(I,{id:t}).record,c=M(n).record;return a.a.createElement("div",null,"id: ",t," record: ",c||"")}o.a.render(a.a.createElement(function(){var e=Object(r.useState)(2),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useMemo)(function(){return N.bind(void 0,c,n)},[n]);return a.a.createElement("div",{style:{padding:"3em",display:"flex",height:"30em",flexDirection:"column",alignContent:"start"}},a.a.createElement("h1",null,"Demonstration of Allstore single-truth store"),a.a.createElement("p",null,"94% less code-lines",a.a.createElement("br",null),"\u2003",a.a.createElement("a",{href:"https://www.npmjs.com/package/allstore"},"Allstore at npm"),a.a.createElement("br",null),"\u2003",a.a.createElement("a",{href:"https://github.com/haraldrudell/demo-context-store/tree/master/src/allstore"},"Allstore source code"),a.a.createElement("br",null)),a.a.createElement("p",null,"Click Increment to update value with 1 s delay via connect store-subscription",a.a.createElement("br",null),a.a.createElement("button",{onClick:B},"Increment")),"Click Change Id to display another record via:",a.a.createElement("ul",{style:{marginBlockStart:0,marginBlockEnd:0}},a.a.createElement("li",null,"useAllstore React 16.7 hook-subscription and"),a.a.createElement("li",null,"OrderedMap access")),a.a.createElement("div",{style:{marginBottom:"1em"}},a.a.createElement("button",{onClick:o},"Change Id")),a.a.createElement(S,null,a.a.createElement(W,null),a.a.createElement(H,{id:n})),a.a.createElement("p",null,"Written by Harald Rudell harald.rudell@gmail.com (http://www.haraldrudell.com)"))},null),document.getElementById("root"))}},[[14,2,1]]]);
//# sourceMappingURL=main.f93b5b1c.chunk.js.map